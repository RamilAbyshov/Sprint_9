# Sprint_9: Инфраструктура: Docker, CI/CD

В данном проекте было выполнено задание для практики изученных за спринт основ работы с Docker и CI/CD

* Docker containers
* Docker image
* Docker-compose
* CI/CD 
* GitHub Actions 


## Тестовый проект для тестирования сервиса «Продуктовый помощник»

В тестах были покрыты следующие тестовые сценарии:

1. Создание аккаунта

   * Нажать кнопку «Создать аккаунт».
   * Заполнить все поля формы регистрации и нажать кнопку «Создать аккаунт».
   * Проверить:
      - Произошёл ли переход на страницу авторизации,
      - Отображается ли форма авторизации.

2. Авторизация

   * Нажать кнопку «Войти».
   * Заполнить все поля формы авторизации и нажать кнопку «Войти».
   * Проверить: 
       - Произошёл ли переход на главную страницу,
       - Отображается ли кнопка «Выход».

3. Создание рецепта

    * Авторизоваться и перейти на таб «Создать рецепт».
    * Заполнить все поля формы создания рецепта и нажать кнопку «Создать рецепт».
    * Проверить, отображается ли: 
        - Карточка созданного рецепта,
        - Название, которое заполняли при создании.
   
### Cтруктура проекта

```
Sprint_9/
├── allure-results                   # Allure-отчёты и результаты тестов
├── assets                           # Директория с ассетами (изображения)
├── .github 
│  └── workflows
│     └── ci.yml                     # GitHub Actions workflow для CI/CD
├── data                            
│  └── test_data.py                  # Статические тестовые данные (URLs, таймауты, credentials)
├── locators
│  ├── base_locators.py              # Базовые локаторы страниц (общие элементы)
│  ├── create_recipe_locators.py     # Локаторы страницы создания рецептов
│  ├── login_locators.py             # Локаторы страницы логина
│  └── registration_locators.py      # Локаторы страницы регистрации
├── pages
│  ├── base_page.py                  # Базовые методы страниц (наследование для всех page objects)
│  ├── create_recipe_page.py         # Методы страницы создания рецептов
│  ├── login_page.py                 # Методы страницы логина
│  └── registration_page.py          # Методы страницы регистрации
├── tests
│  ├── test_create_recipe.py         # Тесты страницы создания рецепта
│  ├── test_login.py                 # Тесты страницы логина
│  └── test_registration.py          # Тесты страницы регистрации
└── utils
│  └── test_user.py                  # Вспомогательные функции (генерация тестовых пользователей)
├── config.json                      # Конфигурация Selenoid (браузеры и версии)
├── conftest.py                      # Фикстуры pytest и настройки WebDriver
├── docker-compose.yml               # Docker Compose конфигурация (Selenoid + тесты)
├── Dockerfile                       # Docker образ для запуска тестов
├── README.md                       
├── requirements.txt                 # Зависимости Python проекта
└── Screenshot 2025-09-19 212958.png # Скриншот с пройденным пайплайном

```

### Запуск автотестов

**Установка зависимостей** 
```bash
  pip install -r requirements.txt
```

Также необходим доступ к сервису: https://foodgram-frontend-1.prakticum-team.ru/

**Запуск автотестов локально**

Запуск и генерация Allure отчёта:
```bash
  pytest tests/ --alluredir=allure-results
```
Просмотр Allure отчёта:
```bash
  allure serve allure-results-chrome
```
**Запуск с Docker и Selenoid**

Запуск всей инфраструктуры (Selenoid + тесты):

```bash
  docker compose up
```

Только сборка Docker образов:
```bash
  docker compose build
```

Остановка и очистка:
```bash
  docker compose down
```

**Просмотр Selenoid UI**

После запуска Docker Compose локально доступен интерфейс Selenoid:

http://localhost:8081

**CI/CD интеграция**

Тесты автоматически запускаются в GitHub Actions при пуше в ветку `main`. Отчеты доступны во вкладке Actions репозитория.

Скриншот с пройденным пайплайном
![Screenshot 2025-09-19 212958.png](Screenshot%202025-09-19%20212958.png)